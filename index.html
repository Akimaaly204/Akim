<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TalasPro — Магазин электрики</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
body { font-family: Inter, sans-serif; -webkit-tap-highlight-color: transparent; }
.page-section { display:none }
.page-section.active { display:block }
.nav-btn.active-tab { color:#2563eb }
.fade-in { animation:fade .25s ease }
@keyframes fade { from{opacity:0;transform:translateY(6px)} to{opacity:1} }
</style>
</head>

<body class="bg-gray-50 pb-24 text-gray-950">

<!-- TOAST -->
<div id="cart-toast" class="fixed top-5 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-2xl text-[10px] font-black uppercase z-[3000] hidden">
Добавлено в корзину
</div>

<!-- HEADER -->
<header class="sticky top-0 bg-white border-b shadow-sm z-[1000]">
<div class="bg-blue-600 text-white text-[9px] py-2 px-4 flex justify-between font-black uppercase tracking-widest">
<span><i class="fas fa-bolt"></i> TalasPro</span>
<span>+996 755 000 228</span>
</div>
<div class="p-4 flex gap-3 items-center">
<button onclick="switchPage('home',this)" class="w-10 h-10 bg-blue-600 rounded-xl text-white">
<i class="fas fa-home"></i>
</button>
<input id="globalSearch" oninput="handleSearch()" placeholder="Поиск товара..."
class="flex-grow bg-gray-100 rounded-xl py-2.5 px-4 text-sm outline-none">
</div>
</header>

<!-- HOME -->
<section id="page-home" class="page-section active px-3 py-4 fade-in">
<div id="productGrid" class="grid grid-cols-2 gap-3"></div>
</section>

<!-- CATALOG -->
<section id="page-catalog" class="page-section px-5 py-6 fade-in">
<h2 class="text-xl font-black uppercase mb-6">Категории</h2>
<div class="grid gap-3">
<div onclick="filterByCategory('all')" class="bg-white p-5 rounded-2xl shadow">Все товары</div>
<div onclick="filterByCategory('kinee')" class="bg-white p-5 rounded-2xl shadow">Автоматика KINEE</div>
<div onclick="filterByCategory('kabel')" class="bg-white p-5 rounded-2xl shadow">Кабель</div>
<div onclick="filterByCategory('solnce')" class="bg-white p-5 rounded-2xl shadow">Солнечные системы</div>
</div>
</section>

<!-- CART -->
<section id="page-cart" class="page-section px-5 py-6 fade-in">
<h2 class="text-xl font-black uppercase mb-6">Ваш заказ</h2>
<div id="cart-items" class="space-y-3 mb-6"></div>
<div id="cart-footer" class="hidden">
<div class="bg-white p-6 rounded-2xl mb-4 shadow">
<div class="flex justify-between">
<span class="text-[10px] font-black uppercase">Итого:</span>
<span id="cart-total" class="text-xl font-black text-blue-600">0 сом</span>
</div>
</div>
<button onclick="sendOrder()" class="w-full bg-green-500 text-white py-5 rounded-2xl font-black uppercase">
<i class="fab fa-whatsapp"></i> Отправить заказ
</button>
</div>
</section>

<!-- PROFILE -->
<section id="page-profile" class="page-section px-5 py-6 fade-in">
<div class="bg-white p-8 rounded-3xl text-center shadow">
<div class="w-20 h-20 bg-blue-600 rounded-3xl mx-auto text-white text-3xl flex items-center justify-center">T</div>
<h3 class="font-black uppercase mt-4">TalasPro Электрик</h3>
<p class="text-[9px] text-gray-400 mt-2 uppercase">Талас, Кыргызстан</p>
</div>
<div onclick="adminSecret()" class="opacity-0 py-20">admin</div>
</section>

<!-- NAV -->
<nav class="fixed bottom-0 left-0 right-0 bg-white border-t flex justify-around py-3 shadow">
<button onclick="switchPage('home',this)" class="nav-btn active-tab flex flex-col items-center">
<i class="fas fa-store"></i><span class="text-[8px]">Главная</span>
</button>
<button onclick="switchPage('catalog',this)" class="nav-btn flex flex-col items-center">
<i class="fas fa-list"></i><span class="text-[8px]">Каталог</span>
</button>
<button onclick="switchPage('cart',this)" class="nav-btn flex flex-col items-center relative">
<i class="fas fa-shopping-basket"></i>
<span id="cart-count" class="absolute -top-1 -right-1 bg-blue-600 text-white text-[7px] px-1 rounded-full">0</span>
<span class="text-[8px]">Заказ</span>
</button>
<button onclick="switchPage('profile',this)" class="nav-btn flex flex-col items-center">
<i class="fas fa-info-circle"></i><span class="text-[8px]">Инфо</span>
</button>
</nav>

<!-- SCRIPT -->
<script>
const CART_KEY='talaspro_cart';
const ADMIN_PIN='2409';

let allProducts=[
{id:'1',title:'Автомат KINEE 2P 63A',price:1250,cat:'kinee'},
{id:'2',title:'Кабель ВВГнг 3х2.5',price:85,cat:'kabel'},
{id:'3',title:'УЗИП KINEE',price:1800,cat:'kinee'},
{id:'4',title:'Инвертор 5kW',price:42000,cat:'solnce'}
];
let cart=[];
let clicks=0;

function saveCart(){localStorage.setItem(CART_KEY,JSON.stringify(cart))}
function loadCart(){cart=JSON.parse(localStorage.getItem(CART_KEY)||'[]')}

function notify(t,b){
if(Notification.permission==='granted') new Notification(t,{body:b});
}

if('Notification'in window && Notification.permission==='default'){
Notification.requestPermission();
}

function renderProducts(list){
const g=document.getElementById('productGrid');
g.innerHTML=list.map(p=>`
<div class="bg-white p-3 rounded-2xl shadow flex flex-col">
<div class="aspect-square bg-blue-50 rounded-xl mb-2 flex items-center justify-center">
<i class="fas fa-bolt text-blue-300 text-2xl"></i>
</div>
<h3 class="text-[9px] font-black uppercase h-7">${p.title}</h3>
<p class="text-blue-600 font-black text-xs mt-auto">${p.price} сом</p>
<button onclick="addToCart('${p.id}')" class="bg-black text-white py-2 mt-2 rounded-xl text-[8px] font-black">Купить</button>
</div>`).join('');
}

function addToCart(id){
const p=allProducts.find(x=>x.id===id);
cart.push(p);
saveCart();
updateCart();
notify('TalasPro','Добавлено: '+p.title);
document.getElementById('cart-toast').classList.remove('hidden');
setTimeout(()=>cart-toast.classList.add('hidden'),1200);
}

function updateCart(){
document.getElementById('cart-count').innerText=cart.length;
const c=document.getElementById('cart-items');
const f=document.getElementById('cart-footer');
if(!cart.length){c.innerHTML='Корзина пуста';f.classList.add('hidden');return}
f.classList.remove('hidden');
let total=0;
c.innerHTML=cart.map((i,n)=>{total+=i.price;return`
<div class="bg-white p-4 rounded-xl flex justify-between shadow">
<div>${i.title}<br><b>${i.price} сом</b></div>
<button onclick="removeFromCart(${n})">✕</button>
</div>`}).join('');
document.getElementById('cart-total').innerText=total+' сом';
}

function removeFromCart(i){cart.splice(i,1);saveCart();updateCart()}

function filterByCategory(c){renderProducts(c==='all'?allProducts:allProducts.filter(p=>p.cat===c));switchPage('home')}
function handleSearch(){const q=globalSearch.value.toLowerCase();renderProducts(allProducts.filter(p=>p.title.toLowerCase().includes(q)))}

function sendOrder(){
let m='Заказ:\n';
cart.forEach((p,i)=>m+=`${i+1}. ${p.title} — ${p.price} сом\n`);
notify('TalasPro','Заказ отправлен');
open('https://wa.me/996755000228?text='+encodeURIComponent(m));
}

function switchPage(p,b){
document.querySelectorAll('.page-section').forEach(s=>s.classList.remove('active'));
document.getElementById('page-'+p).classList.add('active');
document.querySelectorAll('.nav-btn').forEach(x=>x.classList.remove('active-tab'));
b&&b.classList.add('active-tab');
scrollTo(0,0);
}

function adminSecret(){
if(++clicks>=5){
const pin=prompt('PIN администратора');
if(pin===ADMIN_PIN) location.href='admin/index.html';
clicks=0;
}
}

loadCart();
updateCart();
renderProducts(allProducts);
</script>

</body>
</html>
