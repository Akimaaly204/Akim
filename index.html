<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKIM.PRO ‚Äî –ó–∞—â–∏—â–µ–Ω–Ω–æ–µ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, deleteDoc, doc, updateDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'akim-pro-store';

        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞
        const ADMIN_PASS = "0707"; // –¢–≤–æ–π –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞

        window.inventory = [];
        window.cart = JSON.parse(localStorage.getItem('akim_neon_cart')) || [];
        window.isAuthorized = sessionStorage.getItem('akim_admin_auth') === 'true';

        async function initAuth() {
            await signInAnonymously(auth);
            onAuthStateChanged(auth, (user) => {
                if (user) loadProducts();
            });
        }

        function loadProducts() {
            const q = collection(db, 'artifacts', appId, 'public', 'data', 'products');
            onSnapshot(q, (snapshot) => {
                window.inventory = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                renderProducts();
                if(window.isAuthorized) renderAdminList();
            });
        }

        window.addProduct = async (e) => {
            e.preventDefault();
            if(!window.isAuthorized) return;
            const formData = new FormData(e.target);
            const newProduct = {
                name: formData.get('name'),
                price: Number(formData.get('price')),
                cat: formData.get('cat'),
                brand: formData.get('brand'),
                img: formData.get('img') || "https://images.unsplash.com/photo-1558211583-d28f610b15a0?w=400",
                timestamp: Date.now()
            };
            try {
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'products'), newProduct);
                e.target.reset();
                showStatus("–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω!");
            } catch (err) { showStatus("–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞", true); }
        };

        window.deleteProduct = async (id) => {
            if(!window.isAuthorized) return;
            if(confirm("–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä –∏–∑ –±–∞–∑—ã?")) {
                await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'products', id));
            }
        };

        window.tryLogin = () => {
            if(window.isAuthorized) {
                toggleAdminModal();
                return;
            }
            const pass = prompt("–í–≤–µ–¥–∏—Ç–µ –ü–ò–ù-–∫–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:");
            if(pass === ADMIN_PASS) {
                window.isAuthorized = true;
                sessionStorage.setItem('akim_admin_auth', 'true');
                renderAdminList();
                toggleAdminModal();
            } else if (pass !== null) {
                alert("–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!");
            }
        };

        window.renderProducts = (items = window.inventory) => {
            const grid = document.getElementById('appGrid');
            grid.innerHTML = items.length ? '' : '<p class="text-center col-span-full py-20 text-gray-500 italic">–ù–∞ —Å–∫–ª–∞–¥–µ –ø—É—Å—Ç–æ...</p>';
            
            items.forEach((item, idx) => {
                grid.innerHTML += `
                    <div class="product-card rounded-3xl p-5 flex flex-col opacity-0" style="animation: slideUp 0.4s forwards ${idx * 0.05}s">
                        <div class="h-44 bg-white/[0.02] rounded-2xl mb-4 flex items-center justify-center relative overflow-hidden group border border-white/5">
                            <img src="${item.img}" class="max-w-[80%] max-h-[80%] object-contain opacity-50 group-hover:opacity-100 transition-all duration-500 group-hover:scale-110">
                            <div class="absolute top-2 left-2 bg-black/60 backdrop-blur-md px-2 py-0.5 rounded-lg text-[8px] font-black text-[#00f2ff] uppercase border border-[#00f2ff]/20">
                                ${item.brand}
                            </div>
                        </div>
                        <div class="flex-grow">
                            <h3 class="text-sm font-bold text-gray-200 leading-tight mb-4">${item.name}</h3>
                            <div class="flex items-center justify-between mt-auto">
                                <div>
                                    <p class="text-[8px] text-gray-500 uppercase font-bold">–¶–µ–Ω–∞ –∑–∞ –µ–¥.</p>
                                    <p class="text-xl font-black text-white orbitron italic">${item.price.toLocaleString()}<span class="text-xs text-[#00f2ff] ml-1">C</span></p>
                                </div>
                                <button onclick="addToCart('${item.id}')" class="w-12 h-12 bg-white/5 rounded-2xl flex items-center justify-center hover:bg-[#00f2ff] hover:text-black transition-all group border border-white/5">
                                    <i class="fas fa-plus group-hover:rotate-90 transition-transform"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
        };

        window.renderAdminList = () => {
            const list = document.getElementById('adminProductList');
            if(!list) return;
            list.innerHTML = window.inventory.map(item => `
                <div class="flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5">
                    <div class="truncate pr-4">
                        <p class="text-[10px] font-bold text-white truncate">${item.name}</p>
                        <p class="text-[9px] text-yellow-500 font-black">${item.price} —Å.</p>
                    </div>
                    <button onclick="deleteProduct('${item.id}')" class="text-red-500 p-2 hover:bg-red-500/10 rounded-lg transition-colors"><i class="fas fa-trash-alt"></i></button>
                </div>
            `).join('');
        };

        window.changeCategory = (cat, el) => {
            document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
            if(el) el.classList.add('active');
            const filtered = cat === 'all' ? window.inventory : window.inventory.filter(i => i.cat === cat);
            renderProducts(filtered);
        };

        window.addToCart = (id) => {
            const item = window.inventory.find(i => i.id === id);
            const exists = window.cart.find(c => c.id === id);
            if(exists) exists.qty++; else window.cart.push({...item, qty: 1});
            syncCart();
        };

        window.syncCart = () => {
            localStorage.setItem('akim_neon_cart', JSON.stringify(window.cart));
            updateCartUI();
        };

        window.updateCartUI = () => {
            const qtySum = window.cart.reduce((sum, i) => sum + i.qty, 0);
            const total = window.cart.reduce((sum, i) => sum + (i.price * i.qty), 0);
            document.getElementById('cartCount').innerText = qtySum;
            document.getElementById('cartCount').classList.toggle('hidden', qtySum === 0);
            document.getElementById('cartTotal').innerText = `${total.toLocaleString()} —Å.`;
            
            document.getElementById('cartItems').innerHTML = window.cart.map((item, i) => `
                <div class="flex gap-4 bg-white/[0.03] p-4 rounded-2xl items-center border border-white/5">
                    <div class="flex-grow">
                        <h4 class="text-[11px] font-bold text-gray-300 leading-tight">${item.name}</h4>
                        <p class="text-[#00f2ff] font-black text-sm mt-1">${(item.price * item.qty).toLocaleString()} —Å.</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <button onclick="stepCart(${i}, -1)" class="w-7 h-7 bg-white/5 rounded-lg text-xs">-</button>
                        <span class="text-xs font-black w-4 text-center">${item.qty}</span>
                        <button onclick="stepCart(${i}, 1)" class="w-7 h-7 bg-white/5 rounded-lg text-xs">+</button>
                    </div>
                </div>
            `).join('');
        };

        window.stepCart = (idx, delta) => {
            window.cart[idx].qty += delta;
            if(window.cart[idx].qty <= 0) window.cart.splice(idx, 1);
            syncCart();
        };

        window.toggleCart = () => document.getElementById('cartSlide').classList.toggle('translate-x-full');
        window.toggleAdminModal = () => document.getElementById('adminModal').classList.toggle('hidden');

        window.showStatus = (msg, isError = false) => {
            const s = document.getElementById('statusMsg');
            s.innerText = msg;
            s.style.color = isError ? '#ef4444' : '#fbbf24';
            setTimeout(() => s.innerText = '', 3000);
        };

        window.submitOrder = () => {
            if(!window.cart.length) return;
            let text = "‚ö°Ô∏è –ó–ê–ö–ê–ó AKIM.PRO ‚ö°Ô∏è\n\n";
            window.cart.forEach(i => text += `‚ñ™Ô∏è ${i.name} [x${i.qty}] = ${i.price * i.qty}—Å\n`);
            text += `\nüíµ –ò–¢–û–ì–û: ${document.getElementById('cartTotal').innerText}`;
            window.open(`https://wa.me/996755000228?text=${encodeURIComponent(text)}`);
        };

        document.addEventListener('DOMContentLoaded', () => {
            initAuth();
            updateCartUI();
            document.getElementById('mainSearch').oninput = (e) => {
                const v = e.target.value.toLowerCase();
                renderProducts(window.inventory.filter(i => i.name.toLowerCase().includes(v) || i.brand.toLowerCase().includes(v)));
            };
        });

    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Inter:wght@400;700;900&display=swap');
        :root { --neon: #00f2ff; --bg: #050505; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: white; scroll-behavior: smooth; }
        .orbitron { font-family: 'Orbitron', sans-serif; }
        .category-tab.active { color: var(--neon); border-bottom: 2px solid var(--neon); text-shadow: 0 0 10px rgba(0, 242, 255, 0.4); }
        .product-card { background: linear-gradient(145deg, #0f0f0f, #050505); border: 1px solid rgba(255, 255, 255, 0.03); transition: 0.3s; }
        .product-card:hover { border-color: var(--neon); box-shadow: 0 0 30px rgba(0, 242, 255, 0.05); }
        @keyframes slideUp { from { transform: translateY(15px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .custom-scroll::-webkit-scrollbar { display: none; }
        input, select { -webkit-appearance: none; }
    </style>
</head>
<body class="pb-24">

    <!-- HEADER -->
    <header class="p-6 flex justify-between items-center border-b border-white/5 bg-black/50 sticky top-0 z-50 backdrop-blur-md">
        <div>
            <h1 class="orbitron text-2xl font-black tracking-widest text-white">AKIM<span class="text-[#00f2ff]">.PRO</span></h1>
            <p class="text-[8px] uppercase tracking-[0.4em] text-gray-500 font-bold">Professional Systems</p>
        </div>
        <div class="flex gap-4">
            <button onclick="tryLogin()" class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center border border-white/10 text-yellow-500/50 hover:text-yellow-500 transition-colors">
                <i class="fas fa-key text-xs"></i>
            </button>
            <button onclick="toggleCart()" class="relative w-10 h-10 rounded-full bg-white/5 flex items-center justify-center border border-white/10">
                <i class="fas fa-shopping-cart text-xs"></i>
                <span id="cartCount" class="absolute -top-1 -right-1 bg-[#00f2ff] text-black text-[9px] font-black px-1.5 rounded-full hidden animate-pulse">0</span>
            </button>
        </div>
    </header>

    <!-- CATEGORIES -->
    <nav class="sticky top-[81px] z-40 bg-black/80 backdrop-blur-md border-b border-white/5 overflow-x-auto custom-scroll flex px-4 gap-8">
        <button onclick="changeCategory('all', this)" class="category-tab active py-4 text-[10px] font-black uppercase tracking-widest whitespace-nowrap">–í—Å–µ</button>
        <button onclick="changeCategory('–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç', this)" class="category-tab py-4 text-[10px] font-black uppercase tracking-widest whitespace-nowrap">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</button>
        <button onclick="changeCategory('–∞–≤—Ç–æ–º–∞—Ç–∏–∫–∞', this)" class="category-tab py-4 text-[10px] font-black uppercase tracking-widest whitespace-nowrap">–ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞</button>
        <button onclick="changeCategory('–∫–∞–±–µ–ª—å', this)" class="category-tab py-4 text-[10px] font-black uppercase tracking-widest whitespace-nowrap">–ö–∞–±–µ–ª—å</button>
        <button onclick="changeCategory('—É–º–Ω—ã–π-–¥–æ–º', this)" class="category-tab py-4 text-[10px] font-black uppercase tracking-widest whitespace-nowrap">Smart Home</button>
    </nav>

    <!-- SEARCH -->
    <div class="p-6">
        <div class="relative">
            <i class="fas fa-search absolute left-5 top-1/2 -translate-y-1/2 text-gray-600"></i>
            <input type="text" id="mainSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–∫–ª–∞–¥—É..." class="w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-14 pr-6 text-sm outline-none focus:border-[#00f2ff]/30 transition-all">
        </div>
    </div>

    <!-- MAIN GRID -->
    <main id="appGrid" class="px-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></main>

    <!-- ADMIN MODAL -->
    <div id="adminModal" class="fixed inset-0 z-[300] hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/95 backdrop-blur-xl" onclick="toggleAdminModal()"></div>
        <div class="relative bg-zinc-900 w-full max-w-lg rounded-[2.5rem] p-8 border border-white/10 flex flex-col max-h-[90vh] shadow-2xl">
            <div class="flex justify-between items-center mb-6">
                <h2 class="orbitron text-xl font-bold text-yellow-500 uppercase tracking-tighter">–°–∫–ª–∞–¥: –†–µ–¥–∞–∫—Ç–æ—Ä</h2>
                <div id="statusMsg" class="text-[10px] font-bold uppercase"></div>
            </div>
            
            <form onsubmit="addProduct(event)" class="space-y-4 mb-8">
                <input name="name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" required class="w-full bg-white/5 border border-white/10 rounded-xl p-4 text-sm outline-none focus:border-yellow-500/50">
                <div class="flex gap-4">
                    <input name="price" type="number" placeholder="–¶–µ–Ω–∞ (—Å–æ–º)" required class="w-1/2 bg-white/5 border border-white/10 rounded-xl p-4 text-sm outline-none focus:border-yellow-500/50">
                    <input name="brand" placeholder="–ë—Ä–µ–Ω–¥" required class="w-1/2 bg-white/5 border border-white/10 rounded-xl p-4 text-sm outline-none focus:border-yellow-500/50">
                </div>
                <select name="cat" class="w-full bg-white/5 border border-white/10 rounded-xl p-4 text-sm outline-none focus:border-yellow-500/50 text-gray-400">
                    <option value="–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</option>
                    <option value="–∞–≤—Ç–æ–º–∞—Ç–∏–∫–∞">–ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞</option>
                    <option value="–∫–∞–±–µ–ª—å">–ö–∞–±–µ–ª—å</option>
                    <option value="—É–º–Ω—ã–π-–¥–æ–º">–£–º–Ω—ã–π –¥–æ–º</option>
                </select>
                <input name="img" placeholder="URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" class="w-full bg-white/5 border border-white/10 rounded-xl p-4 text-sm outline-none focus:border-yellow-500/50">
                <button type="submit" class="w-full bg-yellow-500 text-black font-black py-4 rounded-xl uppercase tracking-widest text-xs hover:bg-yellow-400 transition-colors">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –±–∞–∑—É</button>
            </form>

            <h3 class="text-[9px] font-black uppercase text-gray-500 mb-4 tracking-[0.3em]">–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π:</h3>
            <div id="adminProductList" class="flex-grow overflow-y-auto space-y-2 custom-scroll"></div>
        </div>
    </div>

    <!-- CART SIDEBAR -->
    <div id="cartSlide" class="fixed inset-0 z-[200] translate-x-full transition-transform duration-500">
        <div class="absolute inset-0 bg-black/90 backdrop-blur-sm" onclick="toggleCart()"></div>
        <div class="absolute right-0 top-0 h-full w-full max-w-md bg-zinc-950 p-8 flex flex-col border-l border-[#00f2ff]/20">
            <div class="flex justify-between items-center mb-10">
                <h2 class="orbitron text-xl font-bold text-[#00f2ff] tracking-tighter">–ú–û–ô –í–´–ë–û–†</h2>
                <button onclick="toggleCart()" class="text-3xl font-thin text-gray-500">&times;</button>
            </div>
            <div id="cartItems" class="flex-grow overflow-y-auto space-y-4 custom-scroll"></div>
            <div class="mt-8 pt-6 border-t border-white/5">
                <div class="flex justify-between items-end mb-8 px-2">
                    <span class="text-[10px] text-gray-500 uppercase font-black tracking-widest">–û–±—â–∏–π –∏—Ç–æ–≥:</span>
                    <span id="cartTotal" class="text-3xl font-black italic text-[#00f2ff] orbitron">0 —Å.</span>
                </div>
                <button onclick="submitOrder()" class="w-full bg-[#00f2ff] text-black py-5 rounded-2xl font-black uppercase italic tracking-widest text-sm hover:shadow-[0_0_20px_rgba(0,242,255,0.3)] transition-all">
                    –û—Ñ–æ—Ä–º–∏—Ç—å –≤ WhatsApp <i class="fab fa-whatsapp ml-2"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- BOTTOM NAV -->
    <div class="fixed bottom-0 left-0 w-full h-20 bg-black/80 backdrop-blur-md border-t border-white/5 flex items-center justify-around z-50">
        <button onclick="window.scrollTo({top:0, behavior:'smooth'})" class="flex flex-col items-center gap-1 text-gray-500 hover:text-[#00f2ff] transition-colors">
            <i class="fas fa-th-large text-lg"></i>
            <span class="text-[8px] font-bold uppercase tracking-tighter">–°–∫–ª–∞–¥</span>
        </button>
        <button onclick="tryLogin()" class="flex flex-col items-center gap-1 text-gray-500 hover:text-yellow-500 transition-colors">
            <i class="fas fa-user-cog text-lg"></i>
            <span class="text-[8px] font-bold uppercase tracking-tighter">–ê–¥–º–∏–Ω</span>
        </button>
        <button onclick="toggleCart()" class="flex flex-col items-center gap-1 text-gray-500 hover:text-[#00f2ff] transition-colors">
            <i class="fas fa-shopping-basket text-lg"></i>
            <span class="text-[8px] font-bold uppercase tracking-tighter">–ó–∞–∫–∞–∑</span>
        </button>
    </div>

</body>
</html>

